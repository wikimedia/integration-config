- job:
    name: base
    parent: null
    description: |
      The recommended base job.

      All jobs ultimately inherit from this.  It runs a pre-playbook
      which copies all of the job's prepared git repos on to all of
      the nodes in the nodeset.

      It also sets a default timeout value (which may be overidden).
    pre-run: playbooks/base/pre.yaml
    post-run:
      - name: playbooks/base/cleanup.yaml
        cleanup: true
      - playbooks/base/post-logs.yaml
    roles:
      - zuul: zuul/zuul-jobs
    timeout: 1800
    nodeset:
      nodes:
        - name: ubuntu-jammy
          label: ubuntu-jammy

- job:
    name: docker-run-hello-world
    parent: run-test-command
    attempts: 1
    vars:
      # Sudo rule added to zuul-1001 at /etc/sudoers.d/nodepool
      test_command: sudo docker run --rm --entrypoint=/usr/bin/echo docker-registry.wikimedia.org/bookworm Hello world
    nodeset:
      nodes:
        - name: docker-host
          label: docker-host
